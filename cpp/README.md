# c语言
## gcc
1. -D 等于xxx.c 定义的#define PI=3.14
gcc -DPI=3.14 xxx.c -o xxx
2. -v 输出预处理，汇编，编译，链接的详细信息
gcc -v xxx.c -o xxx
3. -Wall 输出警告信息
gcc -Wall xxx.c -o xxx
4. -Werror 产生警告时停止编译
gcc -Werror xxx.c -o xxx
5. -std 指定语言标准
gcc -std=c90 xxx.c -o xxx
6. -O 代码优化选项，值在0～3，default=1,0表示不优化，3表示最高优化代码运行速度最快，但是编译时间和代码体积会受到影响
gcc -O2 xxx.c -o xxx 
7. -E 预处理
gcc -E xxx.c -o xxx.i
8. -S 汇编
gcc -S xxx.i -o xxx.s
9. -c 编译
gcc -c xxx.s -o xxx.o
10. 链接
gcc xxx.o -o xxx
11. -l 指定头文件包含目录: b.c的头文件b.h
gcc -l /home/caddy/c/cpp/h xxx.c /home/caddy/c/cpp/s/b.c -o xxx
12. -L 指定库文件目录，假定在/home/caddy/c/lib 目录下有动态库 libadd.so 静态库 libadd.a gcc默认动态库优先，-static 选项表示动态库静态库同时存在，优先使用静态库。此外：linux下的库文件命名有一个约定，库文件以lib开头，因为所有的库文件都遵循这个约定，所以使用-l选项指定链接的库文件名时可以省去lib三个字母。
gcc -L /home/caddy/c/lib -static -ladd xxx.c -o xxx
13. ar 归档工具创建库文件,ar 创建一个归档文件libfoo.a,并将目标文件xx.o xx.o添加进去。ar工具将若干个单独的文件归并到一个大的文件中以创建归档文件或集合。ar可以创建任何类型文件的归档文件，是一个通用工具
ar crv ../lib/static/libfoo.a xx.o xx.o
14. ranlib xxx.a 为函数库生成内容表
ranlib libfoo.a
15. ar tv 列出归档的内容
ar tv libfoo.a
16. ar x 解压所有归档目标文件
ar x libfoo.a
17. ar dv 删除归档内的某一目标文件
ar dv libfoo.a xx.o


## 链接库时搜索路径顺序
### 静态库
1. ld会先搜索GCC 命令中-L指定的目录
2. 再搜索GCC的环境变量：LIBRARY_PATH
3. 再搜索目录/lib、/usr/lib、/usr/local/lib
### 动态库
1. 编译目标代码时-L指定的目录
2. 环境变量 ：LD_LIBRARY_PATH
3. 配置文件 /etc/ld.so.conf 中指定的动态库搜索路径
4. 默认的动态库路径 /lib、/usr/lib

## 格式字符串和参数列表
- %a %A 浮点数、十六进制数和p记数法（C99/C11）
- %c 单个字符
- %d %i 有符号十进制整数
- %e %E 浮点数，e记数法
- %f 浮点数，十进制记数法
- %g %G 根据值的不同，自动选择%f或%e.%e格式用于指数小于-4或者大于或者等于精度时
- %o 无符号八进制整数
- %p 指针
- %s 字符串
- %u 无符号十进制整数
- %x 小写x,无符号十六进制整数，使用十六进制数0f
- %X 大写X,无符号十六进制整数，使用十六进制数0F
- %% 打印一个百分号
### 格式字符和修饰符
- 标记：-、+、空格、#、0
- 数字：最小字段宽度  %2d
- .数字: 精度 %.2f
- h: 和整型转换说明一起使用，表示short int或unsigned short int类型
- hh: 和整型转换说明一起使用，表示short char或unsigned char类型的值
- j: 和整型转换说明一起使用，表示intmax_t或uintmax_t类型的值，这些类型定义在stdint.h中

- - 负号修饰符：待打印项左对齐。即，从字段的左侧开始打印该项
- + 正号修饰符：有符号值 若为正数，则在值前面显示正号，若为负数，则在值前面显示负号
- 空格：有符号值若为正，则在值前面显示一个前导空格（不显示任何符号），若为负，则在值前面显示负号并覆盖一个前导空格
- #：把结果转换为另一种形式八进制十六进制
  - %#o以0开头
	- %#x 以0x开头
	- %#X 以0X开头
	- 对于浮点数，#保证即使后面没有任何数字，也打印一个小数点字符。
	- %g和%G 使用# %#g %#G #防止结果后面的0被删除
- 0：零对于数值格式，前导0代替空格填充字段宽度，对于整数格式，如果出现-标记或指定精度，忽略0标记
- 例子：
	- %2d  100 = '100'、1 = ' 1' 右对齐输出宽度为2的字符，不足的位置使用空格填充，字段宽度2可以自动扩大以符合要输出的整数长度
	- %02d 100 = '100'、1 = '01' 右对齐输出宽度为2的字符，不足的位置使用填充,字段宽度自动扩大
	-	%-2d 100 = '100'、1 = '1 ' 左对齐输出宽度为2的字符，不足的位置使用空格填充，字段宽度自动扩大
  - % d  100 = ' 100'、-100 = '-100'
	- %x  31 = 1f
	- %X  31 = 1F
	- %#x 31 = 0x1f
	- %#X 31 = 0X1F
	- %4.2f 3852.99 = 3852.99
	- %3.1f 3852.99 = 3853.0 四舍五入 整数位自动扩大
